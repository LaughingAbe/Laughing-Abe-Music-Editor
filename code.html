<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>ZIM - Code Creativity</title>
    <script src="https://zimjs.org/cdn/2.4.1/createjs.min.js"></script>
    <script src="https://zimjs.org/cdn/2.4.1/zim.min.js"></script>

    <!-- zimjs.com - JavaScript Canvas Framework -->
    <script type=module>
    

import zim from "https://zimjs.org/cdn/02/zim";


let windowWidth = 3224;  
let windowHeight = 2268;
let count = 0;              //  number of active/current note
let step = 100;             //  distance between notes on music staff
let size = step;            //  note palette button size
let Rout = size/2;          //  Outer radius of ring notation on music staff
let Rin = Rout*0.7;         //  Inner radius of ring notation on music staff
let Rim = Rout - Rin;       //  Ring thickness of ring notation on music staff  
let buttonY = 0;            //  Height of the pallette from the top
let soundsWritten = [];
let noteCentres = [];
let tabNotation = [];
let pianodots = [];
let noteNum = [];
let noteTimes = [];
let audios = [];
let duration = 6;           //playback speed
let colourBut = [red, orange, yellow, green, blue, purple, pink];
let coloursIn = [white, orange, white, green, white, white, pink, red, orange, yellow, green, blue, purple];
let coloursOut = [red, red, yellow, yellow, blue, purple, purple, purple, purple, purple, purple, purple, purple];
let solfa = ['Do', 'Re', 'Mi', 'Fa', 'So', 'La', 'Ti'];
let baseline = 700;         //  Centre of middle C on the music staff
let baselineTab = baseline*1.4;     //  top line of the tabs
let pianoDot1X = 100;               //  centre X of first dot on piano diagram
let pianoDot1Y = 1670;              //  centre y of first dot on piano diagram
let markedStringThickness = 15;     //  The string marked on the fretboard diagram
let fretboardDotSize = Rout*0.8;        //  The dots on the fretboard diagram
let lineStart = 0;//Rout;
let musicLineX = lineStart;
let musicLineY = 0; // Added Y position for the music line
let intervalID; // Variable to hold the interval ID

function keydown_space(event) {
soundsWritten.push(' ');
noteCentres.push(' ');
noteNum.push(0);
count += step;
}
function keydwon_backspace(event) {
    count -= step;
    const lastItem = soundsWritten[soundsWritten.length - 1]
    const lastCentre = noteCentres[noteCentres.length - 1]
    lastItem.alp(0);
    lastCentre.alp(0);
    soundsWritten.pop();
    noteCentres.pop();
    noteNum.pop();
    noteTimes.pop();
}

// See Docs under Frame for FIT, FILL, FULL, and TAG
let frame = new Frame(FIT, windowWidth, windowHeight, light, dark, ready);
let stage = frame.stage;
  
function ready() {
    // Create a variable to hold the music line
    let musicLine;
    var stage = frame.stage;

    // Create a function to initialize the music line
    function initMusicLine() {
        // Create music time line at its initial position of the first note 
        musicLine = new Rectangle(10, windowHeight, black).loc(musicLineX, musicLineY);
    }

    // Call the initMusicLine function to initialize the music line
    initMusicLine();

    document.addEventListener('keydown', function (event) {
        console.log(`Keydown event fired ${event.key}`);
        switch (event.code) {
            case 'Space':
                keydown_space(event);
                break;
            case 'Backspace':
                keydwon_backspace();
                break;
        }      
    }); 

    // Add event listener for tick events (animation loop)
    frame.on("tick", () => {
        // Update the position of the music line
        musicLine.pos(musicLineX, musicLineY);
        //musicLineX += 1; // Increment X position here
        // Update the screen
        stage.update();
    });

    let counting = 0;
    let iCount = 0;

    //Draw the 5 lines of the music staff
    let staffLineWidth = 3;
    for (let i = 0; i < 5; i++) {
        new Rectangle(windowWidth, staffLineWidth, black).loc(0, baseline - Rout*(1 + 2*i));
    }

    //Draw the 4 lines of the tab notation
    //same line thickness as the music staff
    for (let i = 0; i < 4; i++) {
        new Rectangle(windowWidth, staffLineWidth, black).loc(0, baselineTab + Rout*(1 + 2*i));
    }

    //Draw piano diagram white notes
    let pianoNoteWidth = 200;
    let pianoNoteHeight = 400;
    let pianoDiagramHeight = 1400;   // Starting height of piano notes
    let pianoDiagramXBuffer = 50;
    const pianoNotes = [];

    for (let i = 0; i < 14; i++) {
        const pianonote = new Rectangle(pianoNoteWidth, pianoNoteHeight, white)
                                .loc(pianoDiagramXBuffer + pianoNoteWidth * i, pianoDiagramHeight);
        pianonote.borderColor = black;
        pianonote.borderWidth = 5;
        pianoNotes.push(pianonote);
    }

    //Black notes on the piano
    const pianoBlackNoteWidth1 = pianoNoteWidth * 3 / 5;
    const pianoBlackNoteWidth2 = pianoNoteWidth * 4 / 7;
    const pianoBlackNoteHeight = 250;

    const pianoBlackNotes = [];

    // First loop for the first two black notes
    for (let i = 0; i < 2; i++) {
        const pianonote = new Rectangle(pianoBlackNoteWidth1, pianoBlackNoteHeight, black)
                                .loc(pianoDiagramXBuffer + pianoBlackNoteWidth1 * (2 * i + 1), pianoDiagramHeight);
        pianoBlackNotes.push(pianonote);
    }

    // Second loop for the next three black notes
    for (let i = 0; i < 3; i++) {
        const pianonote = new Rectangle(pianoBlackNoteWidth2, pianoBlackNoteHeight, black)
                                .loc(pianoDiagramXBuffer + pianoBlackNoteWidth2 * (2 * i + 1) + 3 * pianoNoteWidth, pianoDiagramHeight);
        pianoBlackNotes.push(pianonote);
    }

    // Draw the second group of 2 black notes
    for (let i = 0; i < 2; i++) {
        const pianonote = new Rectangle(pianoBlackNoteWidth1, pianoBlackNoteHeight, black)
                                .loc(pianoDiagramXBuffer + pianoBlackNoteWidth1 * (2 * i + 1)+pianoNoteWidth*7, pianoDiagramHeight);
        pianoBlackNotes.push(pianonote);
    }

    // Second loop for the next three black notes
    for (let i = 0; i < 3; i++) {
        const pianonote = new Rectangle(pianoBlackNoteWidth2, pianoBlackNoteHeight, black)
                                .loc(pianoDiagramXBuffer + pianoBlackNoteWidth2 * (2 * i + 1) + 3 * pianoNoteWidth+pianoNoteWidth*7, pianoDiagramHeight);
        pianoBlackNotes.push(pianonote);
    }

    //Draw fretboard diagram
    //Draw 4 strings
    let fretboardWidth = 600*3;
    let fretboardHeight = 300;
    let numberOfFrets = 12;
    let fretWidth = fretboardWidth/numberOfFrets;
    let fretboardYStart = 1900;
    let fretboardXStart = 80;
    let tabLineSpace = size;
    let fretboardStringX1 = 100;

    for (let i = 0; i < 4; i++) {
        new Rectangle(fretboardWidth, staffLineWidth, black).loc(fretboardXStart, fretboardYStart+i*tabLineSpace);
    }

    //Draw nut on fretboard
    const nutBufferWidth = 10;
    let nutWidth = 30;
    let nutBorderWidth = staffLineWidth;
    const nut = new Rectangle(nutWidth, fretboardHeight, white).loc(fretboardXStart-nutBufferWidth, fretboardYStart);
    nut.borderColor = black;
    nut.borderWidth = nutBorderWidth;

    //Draw frets
    let fretWireWidth = 10;
    for(let i = 0; i<numberOfFrets; i++){
        new Rectangle(fretWireWidth, fretboardHeight, black).loc(fretboardXStart+fretWidth*(1+i), fretboardYStart);
    }       

    function explodeNote(note) {
        // Animate the explosion effect directly on the note (Circle) object
        note.animate({
            props: { scaleX: 2, scaleY: 2, alpha: 0 }, // Scale up and fade out
            time: 0.5, // Duration of the animation in seconds
            loop: false, // Play the animation only once
            rewind: false, // Do not rewind the animation after it finishes
            call: () => {
                // Remove the note from the stage after the explosion animation
                note.removeFrom(stage);
            }
        });
    }

    // Function to handle explosion effect for a note group
    function explodeNoteGroup(noteGroup) {
        // Animate the explosion effect on the note group
        noteGroup.animate({
            props: { scaleX: 2, scaleY: 2, alpha: 0 }, // Scale up and fade out
            time: 0.5, // Duration of the animation in seconds
            loop: false, // Play the animation only once
            rewind: false, // Do not rewind the animation after it finishes
            call: () => {
                // Remove the note group from the stage after the explosion animation
                noteGroup.removeFrom(stage);
            }
        });
    }

    function fadeOutNote(note) {
        // Animate the fade-out effect on the note (Circle) object
        note.animate({
            props: { alpha: 0 }, // Fade out
            time: 1, // Duration of the animation in seconds
            loop: false, // Play the animation only once
            rewind: false, // Do not rewind the animation after it finishes
            call: () => {
                // Remove the note from the stage after the fade-out animation
                note.removeFrom(stage);
            }
        });
    }

    //Create play button 
    let playButtonWidth = 200;
    let playButtonHeigth = 100;
    let playButtonX1 = 400;
    let playButtonY1 = 800;

    new Button(playButtonWidth,playButtonHeigth,"Play",black).pos(playButtonX1,playButtonY1).tap(()=>{
         // Iterate over each note button and attach the explosion effect to its tap event
        soundsWritten.forEach(noteButton => {
            noteButton.tap(() => {
                // Call the explodeNote function when the note button is tapped
                explodeNote(noteButton);
            });
        });

        noteCentres.forEach(noteButton => {
            noteButton.tap(() => {
                // Call the explodeNote function when the note button is tapped
                explodeNote(noteButton);
            });
        });

        

        // // Array to hold note groups
        // let noteGroups = [];

        // // Iterate over each note and create a group containing both the outer and inner rings
        // for (let i = 0; i < soundsWritten.length; i++) {
        //     let noteGroup = new Group();
        //     noteGroup.addChild(soundsWritten[i]); // Add outer ring
        //     noteGroup.addChild(noteCentres[i]);  // Add inner ring
        //     noteGroups.push(noteGroup);
        // }

        // // Iterate over each note group and attach the explosion effect to its tap event
        // noteGroups.forEach(noteGroup => {
        //     noteGroup.tap(() => {
        //         // Call the explodeNoteGroup function when the note group is tapped
        //         explodeNoteGroup(noteGroup);
        //     });
        // });
    
        //      create music time line at it's initial position of the first note 
        //const musicLine = new Rectangle(10, windowHeight, black).loc(musicLineX, musicLineY);
        //stage.update();
        
        // Start the interval to update the music line's position
        intervalID = setInterval(() => {
            if (musicLineX == lineStart){
                playAudio(noteNum[0]);
                //explodeNote(soundsWritten[0]);
                //explodeNote(noteCentres[0]);
                fadeOutNote(soundsWritten[0]);
                fadeOutNote(noteCentres[0]);
            }

            musicLine.pos(musicLineX, musicLineY);
            //new Rectangle(10, windowHeight, yellow).loc(musicLineX, musicLineY);
            //musicLineX = lineStart + noteTime;
            musicLineX += 2;//2;//100; // Increment X position here  1.95 worked well for CCCCDDDDEEEEFFFFGGGG
            stage.update();
            
            if (musicLineX > windowWidth){
                clearInterval(intervalID);
            }

            //play the next note and let the note explode as the line passes
            let posnum = (musicLineX-lineStart)/size;
            
            if ((musicLineX-lineStart)%(size) == 0){        //if position number is an integer, the line has moved a to the next note

                playAudio(noteNum[posnum]);                 //play note on music staff
                //explodeNote(soundsWritten[posnum]);         //explode ring of note on music staff
                //explodeNote(noteCentres[posnum]);           //explode centre of note on music staff
                fadeOutNote(soundsWritten[posnum]);
                fadeOutNote(noteCentres[posnum]);
                
            }
            // //if ((musicLineX - wlineStart)%(20*size) == 0){
            // if (musicLineX > windowWidth/1.1){
            //     //playAudio(noteNum[posnum]);
            //     clearInterval(intervalID);  
            // }
            
        }, 10); // Set the interval duration to match your note timing
        
        });

        // Function to stop the interval when needed (optional)
        function stopInterval() {
            clearInterval(intervalID);
        }

        // Function to play audio based on note tone
        function playAudio(noteTone) {
            let audio = new Audio();

            switch (noteTone) {
                case 1:
                    audio.src = 'C-[AudioTrimmer.com].wav';
                    break;
                case 2:
                    audio.src = 'D-[AudioTrimmer.com].wav';
                    break;
                case 3:
                    audio.src = 'E-[AudioTrimmer.com].wav';
                    break;
                case 4:
                    audio.src = 'F-[AudioTrimmer.com].wav';
                    break;
                case 5:
                    audio.src = 'G-[AudioTrimmer.com].wav';
                    break;
                case 6:
                    audio.src = 'A-[AudioTrimmer.com].wav';
                    break;
                case 7:
                    audio.src = 'B-[AudioTrimmer.com].wav';
                    break;
                case 8:
                    audio.src = 'C1-[AudioTrimmer.com].wav';
                    break;
                case 9:
                    audio.src = 'D1-[AudioTrimmer.com].wav';
                    break;
                case 10:
                    audio.src = 'E1-[AudioTrimmer.com].wav';
                    break;
                case 11:
                    audio.src = 'F1-[AudioTrimmer.com].wav';
                    break;
                case 12:
                    audio.src = 'G1-[AudioTrimmer.com].wav';
                    break;
                case 13:
                    audio.src = 'A1-[AudioTrimmer.com].wav';
                    break;
                // Add cases for other note tones
                default:
                    // Handle unknown note tones
                    break;
            }
            audio.play();
            //stage.update();
        }

    //create red button
    new Button(size,size,"Do",red).pos(0,buttonY).tap(()=>{
        if(event.ctrlKey){
            count -= step;
        }

        //play the sound when the button is pressed
        var audio = new Audio('C-[AudioTrimmer.com].wav');
        audio.play();

        //register tone 1
        noteNum.push(1);
        noteTimes.push(count);
        audios.push("'C-[AudioTrimmer.com].wav'");

        //play the sound when the outer ring is pressed 
        soundsWritten.push(
            new Circle(Rout, red).pos(count,baseline).tap(()=>{
                var audio = new Audio('C-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
        noteCentres.push(
            new Circle(Rin, white).pos(count+Rim, baseline+Rim).tap(()=>{
                var audio = new Audio('C-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //writing the tab notation
        tabNotation.push(
            new Button(size,size,"0",red).pos(count, baselineTab + Rout*4).tap(()=>{
                var audio = new Audio('C-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 
        
        //marking notes on piano
        pianodots.push(
            new Circle(Rout, red).pos(pianoDot1X, pianoDot1Y).tap(()=>{
                var audio = new Audio('C-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Rectangle(fretboardWidth- nutBufferWidth, markedStringThickness, red).loc(fretboardStringX1, fretboardYStart+2*size - markedStringThickness/2);

        count += step;
        
    });

    //Create orange button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"Re",orange).pos(size*1,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('D-[AudioTrimmer.com].wav');
         audio.play();

         //register tone 2
         noteNum.push(2);
         noteTimes.push(count);
         audios.push("'D-[AudioTrimmer.com].wav'");

        //play the sound when the outer ring is pressed 
        soundsWritten.push(
         new Circle(Rout,red).pos(count, baseline - Rout).tap(()=>{
            var audio = new Audio('D-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
           new Circle(Rin,orange).pos(count + Rim, baseline + Rim - Rout).tap(()=>{
                var audio = new Audio('D-[AudioTrimmer.com].wav');
                audio.play();
           })
         );

         //writing the tab notation
        tabNotation.push(
            new Button(size,size,"2",orange).pos(count, baselineTab + Rout*4).tap(()=>{
                var audio = new Audio('D-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 

        //marking notes on piano
        pianodots.push(
            new Circle(Rout, orange).pos(pianoDot1X+ pianoNoteWidth*1, pianoDot1Y).tap(()=>{
                var audio = new Audio('D-[AudioTrimmer.com].wav');
                audio.play();
            })
        );
        

        //marking the notes on the fretboard
        new Circle(fretboardDotSize, orange).loc(85+fretWidth*(1.5), fretboardYStart+2*tabLineSpace);
         count += step;
    });

    //Create yellow button that plays the sound when pressed and creates a new note symbol on the canvas
    const buttonMi = new Button(size,size,"Mi",yellow).pos(size*2,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }

        //play the sound when the button is pressed
         var audio = new Audio('E-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(3);
         noteTimes.push(count);
         audios.push("'E-[AudioTrimmer.com].wav'");
        //zog(noteNum);

        //play the sound when the outer ring is pressed 
        soundsWritten.push(
         new Circle(Rout,yellow).pos(count, baseline-2*Rout).tap(()=>{
            var audio = new Audio('E-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,white).pos(count+Rim, baseline-2*Rout+Rim).tap(()=>{
             var audio = new Audio('E-[AudioTrimmer.com].wav');
             audio.play();
         })
         );

         //writing the tab notation
        tabNotation.push(
            new Button(size,size,"0",yellow).pos(count, baselineTab + Rout*2).tap(()=>{
                var audio = new Audio('E-[AudioTrimmer.com].wav');
                audio.play();
            })
        );
        
        //marking notes on piano
        pianodots.push(
            new Circle(Rout, yellow).pos(pianoDot1X+ pianoNoteWidth*2, pianoDot1Y).tap(()=>{
                var audio = new Audio('E-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Rectangle(fretboardWidth- nutBufferWidth, markedStringThickness, yellow).loc(fretboardStringX1, fretboardYStart+1*size - markedStringThickness/2);
    
         count += step;
    });

    //Create green button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"Fa",green).pos(size*3,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('F-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(4);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed 
        soundsWritten.push(
         new Circle(Rout,yellow).pos(count, baseline-(3)*Rout).tap(()=>{
            var audio = new Audio('F-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,green).pos(count+Rim, baseline-3*Rout+Rim).tap(()=>{
            var audio = new Audio('F-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

        //writing the tab notation
        tabNotation.push(
            new Button(size,size,"1",green).pos(count, baselineTab + Rout*2).tap(()=>{
                var audio = new Audio('F-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 

         //marking notes on piano
         pianodots.push(
            new Circle(Rout, green).pos(pianoDot1X+ pianoNoteWidth*3, pianoDot1Y).tap(()=>{
                var audio = new Audio('F-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Circle(fretboardDotSize, green).loc(90+fretWidth*(0.5), fretboardYStart+1*tabLineSpace);
        //new Circle(Rout/2, green).loc(115+size/2, fretboardYStart+size);

         count += step;
    });

    //Create blue button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"So",blue).pos(size*4,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('G-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(5);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,blue).pos(count, baseline-4*Rout).tap(()=>{
            var audio = new Audio('G-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,white).pos(count+Rim, baseline-4*Rout+Rim).tap(()=>{
            var audio = new Audio('G-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

        //writing the tab notation
        tabNotation.push(
            new Button(size,size,"0",blue).pos(count, baselineTab+ Rout*6).tap(()=>{
                var audio = new Audio('G-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 

        //marking notes on piano
        pianodots.push(
            new Circle(Rout, blue).pos(pianoDot1X+ pianoNoteWidth*4, pianoDot1Y).tap(()=>{
                var audio = new Audio('G-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Rectangle(fretboardWidth- nutBufferWidth, markedStringThickness, blue).loc(fretboardStringX1, fretboardYStart+3*size - markedStringThickness/2);
         
         count += step;
    });

    //Create navy button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"La",purple).pos(size*5,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('A-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(6);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-5*Rout).tap(()=>{
            var audio = new Audio('A-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,white).pos(count+Rim, baseline-5*Rout+Rim).tap(()=>{
            var audio = new Audio('A-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

        //writing the tab notation
        tabNotation.push(
            new Button(size,size,"0",purple).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('A-[AudioTrimmer.com].wav');
                audio.play();
            })
        );
        
        //marking notes on piano
        pianodots.push(
            new Circle(Rout, purple).pos(pianoDot1X+ pianoNoteWidth*5, pianoDot1Y).tap(()=>{
                var audio = new Audio('A-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Rectangle(fretboardWidth- nutBufferWidth, markedStringThickness, purple).loc(fretboardStringX1, fretboardYStart+0*size - markedStringThickness/2);

         count += step;
    });

     //Create pink button that plays the sound when pressed and creates a new note symbol on the canvas
     new Button(size,size,"Ti",pink).pos(6*size,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('B-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(7);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed 
        soundsWritten.push(
         new Circle(Rout,purple).pos(count, baseline-6*Rout).tap(()=>{
            var audio = new Audio('B-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,pink).pos(count+Rim, baseline-6*Rout+Rim).tap(()=>{
            var audio = new Audio('B-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

        //writing the tab notation
        tabNotation.push(
            new Button(size,size,"2",pink).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('B-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 

         //marking notes on piano
         pianodots.push(
            new Circle(Rout, pink).pos(pianoDot1X+ pianoNoteWidth*6, pianoDot1Y).tap(()=>{
                var audio = new Audio('B-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Circle(fretboardDotSize, pink).loc(85+fretWidth*(1.5), fretboardYStart+0*tabLineSpace);
        //new Circle(Rout/2, pink).loc(110+50+150, 1900);

         count += step;
    });

    //Create red button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"Do",red).pos(7*size,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('C1-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(8);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-7*Rout).tap(()=>{
            var audio = new Audio('C1-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,red).pos(count+Rim, baseline-7*Rout+Rim).tap(()=>{
            var audio = new Audio('C1-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

         //writing the tab notation
        tabNotation.push(
            new Button(size,size,"3",red).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('C1-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 

         //marking notes on piano
         pianodots.push(
            new Circle(Rout, red).pos(pianoDot1X+ pianoNoteWidth*7, pianoDot1Y).tap(()=>{
                var audio = new Audio('C1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        //new Circle(Rout/2, red).loc(110+50+150+150, 1900);
        new Circle(fretboardDotSize, red).loc(85+fretWidth*(2.5), fretboardYStart+0*tabLineSpace);

         count += step;
    });

    //Create orange button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"Re",orange).pos(8*size,buttonY).tap(()=>{

        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('D1-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(9);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-8*Rout).tap(()=>{
            var audio = new Audio('D1-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,orange).pos(count+Rim, baseline-8*Rout+Rim).tap(()=>{
            var audio = new Audio('D1-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

          //writing the tab notation
        tabNotation.push(
            new Button(size,size,"5",orange).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('D1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );
        
        //marking notes on piano
        pianodots.push(
            new Circle(Rout, orange).pos(pianoDot1X+ pianoNoteWidth*8, pianoDot1Y).tap(()=>{
                var audio = new Audio('D1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

         //marking the notes on the fretboard
        new Circle(fretboardDotSize, orange).loc(85+fretWidth*(4.5), fretboardYStart+0*tabLineSpace);

         count += step;
    });

    //Create yellow button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"Mi",yellow).pos(9*size,buttonY).tap(()=>{
        
        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('E1-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(10);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-9*Rout).tap(()=>{
            var audio = new Audio('E1-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,yellow).pos(count+Rim, baseline+Rim-9*Rout).tap(()=>{
            var audio = new Audio('E1-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

          //writing the tab notation
        tabNotation.push(
            new Button(size,size,"7",yellow).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('E1-[AudioTrimmer.com].wav');
                audio.play();
            })
        ); 

        //marking notes on piano
        pianodots.push(
            new Circle(Rout, yellow).pos(pianoDot1X+ pianoNoteWidth*9, pianoDot1Y).tap(()=>{
                var audio = new Audio('E1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

         //marking the notes on the fretboard
        new Circle(fretboardDotSize, yellow).loc(85+fretWidth*(6.5), fretboardYStart+0*tabLineSpace); 

         count += step;
    });

    //Create green button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"Fa",green).pos(10*size,buttonY).tap(()=>{
        
        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('F1-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(11);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-10*Rout).tap(()=>{
            var audio = new Audio('F1-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,green).pos(count+Rim, baseline+Rim-10*Rout).tap(()=>{
            var audio = new Audio('F1-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

          //writing the tab notation
        tabNotation.push(
            new Button(size,size,"8",green).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('F1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking notes on piano
        pianodots.push(
            new Circle(Rout, green).pos(pianoDot1X+ pianoNoteWidth*10, pianoDot1Y).tap(()=>{
                var audio = new Audio('F1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

         //marking the notes on the fretboard
        new Circle(fretboardDotSize, green).loc(85+fretWidth*(7.5), fretboardYStart+0*tabLineSpace);
         
        count += step;
    });

    //Create green button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"So",blue).pos(11*size,buttonY).tap(()=>{
        
        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('G1-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(12);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-11*Rout).tap(()=>{
            var audio = new Audio('G1-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,blue).pos(count+Rim, baseline+Rim-11*Rout).tap(()=>{
            var audio = new Audio('G1-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

        //writing the tab notation
        tabNotation.push(
            new Button(size,size,"10",blue).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('G1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );
        
        //marking notes on piano
        pianodots.push(
            new Circle(Rout, blue).pos(pianoDot1X+ pianoNoteWidth*11, pianoDot1Y).tap(()=>{
                var audio = new Audio('G1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Circle(fretboardDotSize, blue).loc(85+fretWidth*(9.5), fretboardYStart+0*tabLineSpace);

         count += step;
    });

    //Create green button that plays the sound when pressed and creates a new note symbol on the canvas
    new Button(size,size,"La",purple).pos(12*size,buttonY).tap(()=>{
        
        if(event.ctrlKey){
            count -= step;
        }
        
        //play the sound when the button is pressed
         var audio = new Audio('A1-[AudioTrimmer.com].wav');
         audio.play();
         noteNum.push(13);
         noteTimes.push(count);

        //play the sound when the outer ring is pressed
        soundsWritten.push( 
         new Circle(Rout,purple).pos(count, baseline-12*Rout).tap(()=>{
            var audio = new Audio('A1-[AudioTrimmer.com].wav');
            audio.play();
         })
        );

         //play the sound when the inner ring is pressed or leave out if it is an open string
         noteCentres.push(
         new Circle(Rin,purple).pos(count+Rim, baseline+Rim-12*Rout).tap(()=>{
            var audio = new Audio('A1-[AudioTrimmer.com].wav');
            audio.play();
         })
         );

          //writing the tab notation
        tabNotation.push(
            new Button(size,size,"12",purple).pos(count, baselineTab + Rout*0).tap(()=>{
                var audio = new Audio('A1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking notes on piano
        pianodots.push(
            new Circle(Rout, purple).pos(pianoDot1X+ pianoNoteWidth*12, pianoDot1Y).tap(()=>{
                var audio = new Audio('A1-[AudioTrimmer.com].wav');
                audio.play();
            })
        );

        //marking the notes on the fretboard
        new Circle(fretboardDotSize, purple).loc(85+fretWidth*(11.5), fretboardYStart+0*tabLineSpace);

         count += step;
    });
}

</script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
</head>

<body></body>

</html>